<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8'/>
        <meta name='viewport' content='width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no'/>
        <meta name='apple-mobile-web-app-capable' content='yes' />
        <title>layaair立方体</title>
    </head>
    <body>
        <script src="./libs/laya.core.js"></script>
        <script src="./libs/laya.webgl.js"></script>
        <script src="./libs/laya.particle.js"></script>
        <script src="./libs/laya.ani.js"></script>
        <script src="./libs/laya.d3.js"></script>
        <script src="./libs/CameraMoveScript.js"></script>
        <script src="http://res.imtt.qq.com/component/tbs_webgl.js"></script>
        <script>
            tbsWebgl.getAll();
            //初始化3d画布
            Laya3D.init(0, 0,true);
            // 设置全屏
            Laya.stage.scaleMode = Laya.Stage.SCALE_FULL;
            Laya.stage.screenMode = Laya.Stage.SCREEN_NONE;
            // 场景颜色
            Laya.stage.bgColor = "#FFFFFF";
//            Laya.Stat.show();

            // 创建场景对象
            var scene = Laya.stage.addChild(new Laya.Scene());

            // 创建相机
            var camera = scene.addChild(new Laya.Camera(0, 0.1, 500));
            camera.transform.position = new Laya.Vector3(0, 3, 3);
            camera.transform.rotate(new Laya.Vector3( -45, 0, 0), true, false);
            camera.clearColor = null;

            var boxArr = [];
            var rotateArr = [];
            var rotate = new Laya.Vector3(0, 0.035, 0);
            function addCube() {
                // 创建一个立方体
                var box = scene.addChild(new Laya.MeshSprite3D(new Laya.BoxMesh(0.4,0.4,0.4)));
                var material = new Laya.StandardMaterial();
                material.albedo = new Laya.Vector4(0.5, 0.5, 0.5, 1);
                material.diffuseColor = new Laya.Vector3(255, 0, 0); // 设置方体颜色
                box.meshRender.material = material;
                var x = -6 + Math.round((Math.random() * 10));
                var y = Math.round((Math.random() * 1));
                var z = -10 + Math.round((Math.random() * 15));
                box.transform.position = new Laya.Vector3(x, y, z); // 设置立方体坐标
                box.transform.rotate(rotate, true, false);
                boxArr.push(box);
            }
            for (var i = 0; i < 600; i++) {
                addCube();
            }

            Laya.timer.frameLoop(1, null, function () {
//                root.transform.rotate(rotation, true);
                for (var i = 0; i < boxArr.length; i++) {
                    boxArr[i].transform.rotate(rotate, true);
                }
            });

            // 创建一个球体
//            var sphere = scene.addChild(new Laya.MeshSprite3D(new Laya.SphereMesh(0.4,100,100)));
//            var material2 = new Laya.StandardMaterial();
//            material2.albedo = new Laya.Vector4(0, 0, 0, 1);
//            sphere.meshRender.material = material2;
//            sphere.transform.position = new Laya.Vector3(0, 0, 0); // 设置球体坐标
//            sphere.transform.rotate(new Laya.Vector3(45, 45, 0), true, false);

            // 创建聚光灯
            var spotLight = new Laya.SpotLight();
            spotLight.transform.position = new Laya.Vector3(-4, 6, -1);
            spotLight.direction = new Laya.Vector3(-0.3, -1, 0.0);
            spotLight.attenuation = new Laya.Vector3(0.0, 0.0, 0.8);
            spotLight.range = 30.0;
            spotLight.spot = 1;
            scene.addChild(spotLight);

        </script>
    </body>
</html>